\subsection{VSO}\label{ssec:vso}

The Virtual Solar Observatory (\href{http://virtualsolar.org}{VSO}) provides a 
single, standard query interface to solar data from different archives 
around the world \citep{hill2009}.
Data products can be requested for specific instruments or missions and
can also be requested based on physical parameters of the data product such
as the wavelength range.
In addition to the VSO's primary web-based interface, a SOAP (Simple Object 
Access Protocol) service is also available.
SunPy's \texttt{vso} module provides access to the VSO via this SOAP service using the
\texttt{suds} package.

Listing~\ref{code:vso_query_simple} shows an example of how to query and download data using
from the VSO using the \texttt{vso} module.
Queries are constructed using one or more attribute objects. Each
attribute object is a constraint on a parameter of the data set, such as the
time, instrument, or wavelength.
Listing~\ref{code:vso_query_simple} also shows how to download the data using
the constructed query. The path to which the data files will be downloaded us defined using custom tokens
which reference the file metadata (e.g. instrument, detector, filename). This provides
users the ability to organize their data into subdirectories on download.

Listing~\ref{code:vso_query_advanced} shows an example of how to make an advanced
query by combining attribute objects.
Two attribute objects can be combined with a logical \texttt{or} operation
using the \texttt{|} (pipe) operator.
All attribute objects provided to the query as arguments are combined with a 
logical \texttt{and} operation.

\begin{listing}[H]
\pythoncode{pycode_vso1.txt}
\caption{Example of querying a single instrument over a time range and downloading the data}
\label{code:vso_query_simple}
\end{listing}

\begin{listing}[H]
\pythoncode{pycode_vso2.txt}
\caption{Example of an advanced VSO query using attribute objects,
combining both data from a detector and any data that falls within two wavelength ranges,
continuing from Listing~\ref{code:vso_query_simple}.}
\label{code:vso_query_advanced}
\end{listing}
